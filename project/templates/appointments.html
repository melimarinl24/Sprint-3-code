{% extends "layout.html" %}
{% block content %}
<main class="container" style="max-width:820px;margin:40px auto;padding:18px;">
  <h1>Your Scheduled Exams</h1>

  {% if exams and exams|length > 0 %}
    <table role="grid" style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th>Exam</th>
          <th>Date</th>
          <th>Location</th>
          <th>Status</th>
          <th style="text-align:center;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for exam in exams %}
        <tr>
          <td>{{ exam.exam_name }}</td>
          <td>{{ exam.exam_date }}</td>
          <td>{{ exam.exam_location }}</td>
          <td>{{ exam.status }}</td>
          <td style="text-align:center;">
            {% if exam.status|lower != 'cancelled' %}
                <!-- Cancel Exam -->
                <form method="POST" action="{{ url_for('student_exam_bp.cancel_exam', exam_id=exam.exam_id) }}" style="display:inline;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() if csrf_token is defined }}">
                <button type="submit" class="secondary">Cancel</button>
                </form>

                <!-- Reschedule Exam -->
                <form method="POST" action="{{ url_for('student_exam_bp.reschedule_exam', exam_id=exam.exam_id) }}" style="display:inline;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() if csrf_token is defined }}">
                <input type="date" name="new_date" required>
                <input type="time" name="new_time" required>
                <button type="submit">Reschedule</button>
                </form>
            {% else %}
              â€”
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No scheduled exams yet.</p>
  {% endif %}
</main>
{% endblock %}
